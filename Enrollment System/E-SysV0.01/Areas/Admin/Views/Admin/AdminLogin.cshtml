@{
    Layout = null;
    ViewData["Title"] = "Admin Login";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/AdminStyles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Make the whole page have the blue background, nav remains white */

    </style>
</head>
<body class="bg-admin">
    <!-- Adapted from wwwroot/css/AdminLandingPage.cshtml -->
    <nav class="d-flex px-5 py-2 gap-5 fixed-top bg-white">
        <div class="d-flex gap-2">
            <div class="align-content-center">
                <img src="~/images/logo.svg" class="rounded p-2" style="background-color:#066B99; width:50px; height:40px;" />
            </div>
            <div class="align-items-center">
                <h5>State University</h5>
                <small style="color:gray;">State University</small>
            </div>
        </div>

        <div class="d-flex align-items-center gap-2 ms-auto">
            <button type="button" data-bs-toggle="modal" data-bs-target="#LoginModal" class="btn text-white" style="background-color:#066B99; width:150px;">Login</button>
        </div>
    </nav>

    <!-- Push content below fixed nav; no need to color section because body is colored -->
    <section class="py-4 px-5" style="min-height: 100vh;">
        <div style="padding-top: 80px;" class="d-flex flex-wrap">
            <div class="p-5 d-flex flex-column flex-grow-1 mt-4" style="min-width: 320px;">
                <div class="mb-3 ">
                    <h1 class="fw-bolder text-white" style="font-size: 48px;">Welcome Back</h1>
                    <h1 class="fw-bolder" style="color: #FF9809; font-size: 48px;">Admin!</h1>
                </div>
            </div>
            <div class="p-5 mt-4 flex-grow-1 d-flex align-items-center justify-content-center" style="min-width: 320px;">
            </div>
        </div>
    </section>

    <!-- Login modal -->
    <div class="modal fade" id="LoginModal" tabindex="-1" role="dialog" aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-heading p-2 d-flex flex-column align-items-center">
                    <img src="~/images/logo.svg" alt="logo" style="width:60px; background: #066B99;" class="rounded-circle p-2">
                    <h4>Philippine State University</h4>
                    <p class="fst-italic">Future starts here.</p>
                </div>
                <div class="modal-body" style="padding: 10% 10%; background-color: #066B99;">
                    @if (ViewBag.ErrorMessage is string err && !string.IsNullOrWhiteSpace(err))
                    {
                        <div class="alert alert-danger" role="alert">
                            @err
                        </div>
                    }
                    <form asp-action="AdminLogin" method="post" class="d-flex flex-column gap-3 align-items-stretch">
                        @Html.AntiForgeryToken()
                        <h2 class="text-white text-center">Login</h2>
                        <div class="d-flex flex-column">
                            <label for="modal-username" class="text-white">Username</label>
                            <input id="modal-username" name="username" class="form-control" autocomplete="username" required />
                        </div>
                        <div class="d-flex flex-column">
                            <label for="modal-password" class="text-white">Password</label>
                            <div class="position-relative">
                                <input id="modal-password" name="password" type="password" class="form-control" autocomplete="current-password" required style="padding-right:3.5rem;" />
                                <button type="button" id="adminTogglePassword" class="btn btn-sm admin-toggle-password position-absolute" aria-label="Toggle password visibility" title="Show / hide password" style="top:50%; right:.35rem; transform:translateY(-50%); z-index:2;">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" id="modal-remember" name="rememberMe" value="true" checked />
                            <label class="form-check-label text-white" for="modal-remember">Remember me</label>
                        </div>

                        <button type="submit" class="btn btn-light w-100 mt-3">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Auto-open the login modal if there was an error from the server
        (function () {
            var hasError = @((ViewBag.ErrorMessage is string e && !string.IsNullOrWhiteSpace(e)) ? "true" : "false");
            if (hasError) {
                document.addEventListener('DOMContentLoaded', function () {
                    var el = document.getElementById('LoginModal');
                    if (el) new bootstrap.Modal(el).show();
                });
            }
        })();
    </script>

    <script>
        // Show / hide password toggle for Admin login
        (function () {
            document.addEventListener('DOMContentLoaded', function () {
                var toggle = document.getElementById('adminTogglePassword');
                var input = document.getElementById('modal-password');
                if (!toggle || !input) return;

                toggle.addEventListener('click', function () {
                    var wasPassword = input.type === 'password';
                    try {
                        input.type = wasPassword ? 'text' : 'password';
                    } catch (ex) {
                        // rare: replace node if browser forbids changing type
                        var clone = input.cloneNode(true);
                        clone.type = wasPassword ? 'text' : 'password';
                        input.parentNode.replaceChild(clone, input);
                        input = clone;
                    }

                    // swap icon
                    var icon = toggle.querySelector('i.fa');
                    if (icon) {
                        icon.classList.toggle('fa-eye', !wasPassword);
                        icon.classList.toggle('fa-eye-slash', wasPassword);
                    }

                    // keep focus and caret at end
                    input.focus();
                    try {
                        var len = input.value.length;
                        input.setSelectionRange(len, len);
                    } catch (ex) { /* ignore */ }
                });

                // keep icon in sync when input type or content changes
                input.addEventListener('input', function () {
                    var icon = toggle.querySelector('i.fa');
                    if (!icon) return;
                    if (input.type === 'text') {
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });
        })();
    </script>

</body>
</html>